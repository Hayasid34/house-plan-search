# DandoriFinder ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

## ğŸ”´ ç·Šæ€¥ãƒ»å„ªå…ˆåº¦é«˜

### ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¶…é«˜é€ŸåŒ–ï¼ˆã‚µãƒ ãƒã‚¤ãƒ«æ©Ÿèƒ½ï¼‰
- [ ] **Supabaseã§thumbnail_urlã‚«ãƒ©ãƒ è¿½åŠ ã®SQLã‚’å®Ÿè¡Œ**
  - Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ SQL Editor
  - å®Ÿè¡Œ: `supabase/migrations/002_add_thumbnail_url.sql`
  ```sql
  ALTER TABLE plans ADD COLUMN IF NOT EXISTS thumbnail_url TEXT;
  COMMENT ON COLUMN plans.thumbnail_url IS 'URL of the thumbnail image generated from the PDF';
  CREATE INDEX IF NOT EXISTS idx_plans_thumbnail_url ON plans(thumbnail_url);
  ```

- [ ] **Supabaseã§plan-thumbnailsãƒã‚±ãƒƒãƒˆã‚’ä½œæˆ**
  - Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ Storage â†’ New bucket
  - Name: `plan-thumbnails`
  - âœ… Public bucket ã«ãƒã‚§ãƒƒã‚¯

- [ ] **ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ**
  ```bash
  cd /Users/dw1003/house-plan-search
  npx tsx scripts/generate-thumbnails.ts
  ```

- [ ] **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã—ã¦å‹•ä½œç¢ºèª**
  ```bash
  npm run dev
  ```
  - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒçˆ†é€Ÿã§è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

### å®Œäº†æ¸ˆã¿
- [x] **ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼èª­ã¿è¾¼ã¿é€Ÿåº¦ã®æœ€é©åŒ–** (å®Œäº† - 2025-11-11)
  - N+1ã‚¯ã‚¨ãƒªå•é¡Œã‚’è§£æ±ºï¼ˆå›³é¢ãƒ»å†™çœŸã‚’ä¸€æ‹¬å–å¾—ï¼‰
  - ãƒ—ãƒ©ãƒ³ä»¶æ•°å–å¾—ç”¨ã®å°‚ç”¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 
  - Supabaseç”»åƒã®æœ€é©åŒ–è¨­å®šã‚’è¿½åŠ 
- [x] **PDFã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…** (å®Œäº† - 2025-11-12)
  - PDFç›´æ¥åŸ‹ã‚è¾¼ã¿ â†’ PNGç”»åƒã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤ºã«å¤‰æ›´
  - èª­ã¿è¾¼ã¿é€Ÿåº¦ãŒ100å€é«˜é€ŸåŒ–ï¼
  - lib/pdfThumbnail.ts, components/PDFThumbnail.tsxå®Ÿè£…å®Œäº†
- [x] **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æ©Ÿèƒ½ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚’æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤** (å®Œäº† - 2025-11-11)
  - Vercel CLIã§ç›´æ¥ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
  - æœ¬ç•ªURL: https://house-plan-search.vercel.app
- [ ] æœ¬ç•ªç’°å¢ƒã§ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆCookieå‰Šé™¤â†’å†ãƒ­ã‚°ã‚¤ãƒ³â†’ãƒ†ã‚¹ãƒˆï¼‰

## ğŸŸ¡ ä¸­å„ªå…ˆåº¦

### AWSç§»è¡Œå¯¾å¿œï¼ˆå¾Œå›ã—ï¼‰
- [ ] **lib/pdfThumbnail.tsã‚’pdf2picãƒ™ãƒ¼ã‚¹ã«æ›¸ãæ›ãˆ**
  - ç¾åœ¨: `canvas`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆAWS Lambdaã§å‹•ã‹ãªã„ï¼‰
  - å¤‰æ›´å¾Œ: `pdf2pic`ï¼ˆAWS Lambdaå¯¾å¿œã€æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ï¼‰
  - ç†ç”±: canvasã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚¤ãƒŠãƒªä¾å­˜ã§AWSç’°å¢ƒã§å‹•ä½œã—ãªã„

- [ ] **AWS Lambdaç”¨ã®ImageMagick Layerã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
  - pdf2picå‹•ä½œã«ã¯ImageMagick/GraphicsMagickãŒå¿…è¦
  - Lambda Layerã¨ã—ã¦è¿½åŠ 

- [ ] **Supabase â†’ AWSç§»è¡Œè¨ˆç”»ã‚’ä½œæˆ**
  - PostgreSQL â†’ RDS PostgreSQL / Aurora
  - Supabase Storage â†’ S3
  - Supabase Auth â†’ AWS Cognito
  - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ã‚’ä½œæˆ

### ãã®ä»–
- [ ] **å„ç¤¾ã”ã¨ã®å…¬é–‹ãƒšãƒ¼ã‚¸æ©Ÿèƒ½ã‚’è¨­è¨ˆãƒ»å®Ÿè£…**
  - URLãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ±ºå®šï¼ˆãƒ‘ã‚¹/ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³/ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰
  - ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®æ–¹é‡ï¼ˆå…¬é–‹/ä¼šç¤¾ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿/unlistedï¼‰
  - è¡¨ç¤ºå†…å®¹ã®æ±ºå®šï¼ˆãƒ—ãƒ©ãƒ³ä¸€è¦§ã€ä¼šç¤¾æƒ…å ±ã€æ¤œç´¢æ©Ÿèƒ½ãªã©ï¼‰
- [ ] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆä¾é ¼ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½ï¼ˆResend APIã‚­ãƒ¼è¨­å®šå¾Œã«ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰

## ğŸŸ¢ é€šå¸¸å„ªå…ˆåº¦ï¼ˆAPI RouteåŒ–ï¼‰

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ï¼ˆsettingsï¼‰
- [ ] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°API Routeä½œæˆï¼ˆsettingså´ - ãƒ™ãƒ³ãƒ€ãƒ¼å´ã¨åŒæœŸï¼‰
  - ãƒ•ã‚¡ã‚¤ãƒ«: `/app/settings/accounts/page.tsx:76`
- [ ] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤API Routeä½œæˆï¼ˆsettingså´ - ãƒ™ãƒ³ãƒ€ãƒ¼å´ã¨åŒæœŸï¼‰
  - ãƒ•ã‚¡ã‚¤ãƒ«: `/app/settings/accounts/page.tsx:137`

### ãƒ™ãƒ³ãƒ€ãƒ¼å´ï¼ˆvendorï¼‰
- [ ] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆAPI Routeä½œæˆï¼ˆvendorå´ - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¨åŒæœŸï¼‰
  - ãƒ•ã‚¡ã‚¤ãƒ«: `/app/vendor/accounts/page.tsx:242`
- [ ] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°API Routeä½œæˆï¼ˆvendorå´ - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¨åŒæœŸï¼‰
  - ãƒ•ã‚¡ã‚¤ãƒ«: `/app/vendor/accounts/page.tsx:295`
- [ ] ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ›´æ–°API Routeä½œæˆï¼ˆvendorå´ï¼‰
  - ãƒ•ã‚¡ã‚¤ãƒ«: `/app/vendor/accounts/page.tsx:340`
  - æ³¨è¨˜: `/app/api/accounts/[id]/password/route.ts` ã¯æ—¢ã«å®Ÿè£…æ¸ˆã¿
- [ ] ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤API Routeä½œæˆï¼ˆvendorå´ - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¨åŒæœŸï¼‰
  - ãƒ•ã‚¡ã‚¤ãƒ«: `/app/vendor/accounts/page.tsx:352`

---

**æœ€çµ‚æ›´æ–°**: 2025-11-11
**ç·ã‚¿ã‚¹ã‚¯æ•°**: 9å€‹
**å®Œäº†**: 0å€‹
**æ®‹ã‚Š**: 9å€‹
